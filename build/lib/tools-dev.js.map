{"version":3,"file":"tools-dev.js","sourceRoot":"/","sources":["lib/tools-dev.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,iCAA0B;AAE1B;;;GAGG;AACH,SAAgB,OAAO,CAAC,EAAW;IACjC,IAAI,KAAK,CAAC,OAAO,IAAI,IAAI;QAAE,OAAO,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;IACpD,OAAO,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,gBAAgB,CAAC;AACjE,CAAC;AAHD,0BAGC;AAED;;;;GAIG;AACH,SAAsB,aAAa,CAAC,IAAY,EAAE,UAAkB;;QAClE,IAAI,UAAU,KAAK,IAAI;YAAE,OAAO,IAAI,CAAC;QACrC,IAAI;YACF,MAAM,GAAG,GAAG,0EAA0E,UAAU,WAAW,kBAAkB,CAAC,IAAI,CAAC,oBAAoB,CAAC;YACxJ,MAAM,QAAQ,GAAG,MAAM,eAAK,CAAC,EAAC,GAAG,EAAE,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;YACnD,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;gBAC1B,0BAA0B;gBAC1B,OAAO,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAC/B;YACD,MAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC,CAAC;SAC3D;QAAC,OAAO,CAAC,EAAE;YACV,MAAM,IAAI,KAAK,CAAC,2BAA2B,UAAU,MAAM,CAAC,EAAE,CAAC,CAAC;SACjE;IACH,CAAC;CAAA;AAbD,sCAaC","sourcesContent":["import axios from 'axios';\n\n/**\n * Tests whether the given variable is really an Array\n * @param it The variable to test\n */\nexport function isArray(it: unknown): it is any[] {\n  if (Array.isArray != null) return Array.isArray(it);\n  return Object.prototype.toString.call(it) === '[object Array]';\n}\n\n/**\n * Translates text using the Google Translate API\n * @param text The text to translate\n * @param targetLang The target languate\n */\nexport async function translateText(text: string, targetLang: string): Promise<string> {\n  if (targetLang === 'en') return text;\n  try {\n    const url = `http://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=${targetLang}&dt=t&q=${encodeURIComponent(text)}&ie=UTF-8&oe=UTF-8`;\n    const response = await axios({url, timeout: 5000});\n    if (isArray(response.data)) {\n      // we got a valid response\n      return response.data[0][0][0];\n    }\n    throw new Error('Invalid response for translate request');\n  } catch (e) {\n    throw new Error(`Could not translate to \"${targetLang}\": ${e}`);\n  }\n}\n"]}